<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta charset="UTF-8"><meta name="google" content="notranslate">
  <meta http-equiv="Content-Language" content="en">
    <meta name="agentCity" content=<%= locals.agentProfile &&
    locals.agentProfile.city || "N/A" %> /> <meta name="agentState" content=<%=
    locals.agentProfile && locals.agentProfile.state || "N/A" %> /> <meta
    name="agentAddress" content=<%= locals.agentProfile &&
    locals.agentProfile.address1|| "N/A" %> />
    <title>Document</title>
    <link
      href="/assets/files/favicon.webp"
      rel="shortcut icon"
      type="image/png"
    />
    <link
      rel="stylesheet"
      href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css"
      integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh"
      crossorigin="anonymous"
    />

    <link rel="stylesheet" type="text/css" href="/stylesheets/reset.css" />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/notyf@3/notyf.min.css"
    />
    <!-- CSS | Main style file -->
    <link href="/css/style-main.css" rel="stylesheet" type="text/css" />
    <link rel="stylesheet" type="text/css" href="/stylesheets/style.css" />
  </head>
  <body>
    <div class="layout">
      <%-include("../partials/sidebar.ejs")%>
      <%-include("../partials/navbar.ejs")%>
      <div class="mainsection">
        <div class="asetup">
          <section class="asetup-head">
            <div class="asetup-head__title">My Account</div>
            <div class="asetup-head__details">Update your account details</div>
          </section>
          <section class="asetup-form">
            <form id="update-profile-form">
              <div class="form__row">
                <div class="form__group w-100 flex">
                  <div class="avatar">
                    <div class="avatar__preview">
                      <img id="avatar-preview" src=<%= locals.user.imageUrl ||
                      "/assets/images/avatar.webp" %> alt="profile picture"
                      class="avatar__preview--image" />
                    </div>
                    <div class="avatar__edit">
                      <input
                        id="image"
                        class="avatar__input disabled"
                        type="file"
                        accept=".png, .jpg, .jpeg .JPG"
                        disabled
                      />
                      <label class="avatar__label" for="image">
                        Change Image
                        <span class="asetup-btn avatar__label--img">
                          <img
                            src="/assets/images/edit2.svg"
                            alt="edit avatar"
                          />
                        </span>
                      </label>
                      <p>File size should not be larger than 1MB</p>
                    </div>
                  </div>
                  <button
                    class="asetup-btn form__button-btn asetup-form-main-btn"
                    id="edit-btn"
                  >
                    Edit Profile
                  </button>
                </div>
              </div>
              <div class="form__row">
                <div class="form__group">
                  <div class="form__details">
                    <div class="form__details--head">Account Details</div>
                    <div class="form__details--text">
                      View and update your personal account details.
                    </div>
                  </div>
                </div>
              </div>
              <div class="form__row">
                <div class="form__group">
                  <label for="full-name" class="form__label">First Name</label>
                  <input
                    type="text"
                    id="first-name"
                    name="full-name"
                    class="form__input disabled"
                    value=<%= locals.user.firstName %> 
                    disabled
                    required
                  />
                  disabled />
                </div>
                <div class="form__group">
                  <label for="username" class="form__label">Last Name</label>
                  <input
                    type="text"
                    id="last-name"
                    class="form__input disabled"
                    value=<%= locals.user.lastName %>
                    disabled
                    required
                  />
                  disabled />
                </div>
              </div>
              <div class="form__row">
                <div class="form__group">
                  <label for="email" class="form__label">Email Address</label>
                  <input
                    type="text"
                    id="email"
                    class="form__input"
                    value=<%= locals.user.email %>
                    disabled
                    required
                  />
                  disabled />
                </div>
                <div class="form__group">
                  <label for="account-created" class="form__label">Account Created</label>
                  <input type="text" id="account-created" class="form__input" value="Tuesday, November 6, 1900"
                    disabled required
                  />
                </div>
              </div>

              <div class="form__row">
                <div class="form__group">
                  <button
                    type="submit"
                    id="submit-btn"
                    class="asetup-btn form__button-btn asetup-form-main-btn disabled"
                    disabled
                  >
                    Update Account
                  </button>
                </div>
              </div>
            </form>
          </section>

          <% if (locals.agentProfile !== null) {%>
          <section class="asetup-form">
            <form id="update-agent-form">
              <div class="form__row">
                <div class="form__group w-100 flex">
                  <div class="avatar">
                    <div class="avatar__preview">
                      <img id="agent-avatar-preview" src=<%= locals.agentProfile.imageUrl || "/assets/images/avatar.webp" %> 
                      alt="profile picture" class="avatar__preview--image" />
                    </div>
                    <div class="avatar__edit">
                      <input
                        id="agent-image"
                        class="avatar__input agentDisabled"
                        type="file"
                        accept=".png, .jpg, .jpeg .JPG"
                        disabled
                      />
                      <label class="avatar__label" for="agent-image">
                        Change Image
                        <span class="asetup-btn avatar__label--img">
                          <img
                            src="/assets/images/edit2.svg"
                            alt="edit avatar"
                          />
                        </span>
                      </label>
                      <p>File size should not be larger than 1MB</p>
                    </div>
                  </div>
                  <button
                    class="asetup-btn form__button-btn asetup-form-main-btn"
                    id="agent-edit-btn"
                  >
                    Edit Profile
                  </button>
                </div>
              </div>
              <div class="form__row">
                <div class="form__group w-100">
                  <div class="form__details">
                    <div class="form__details--head">
                      Enrolled Agent Account Details
                    </div>
                    <div class="form__details--text">
                      View and update your Enrolled Agent account details.
                    </div>
                  </div>
                </div>
              </div>
              <div class="form__row">
                <div class="form__group">
                  <label for="agent-first-name" class="form__label">First Name</label>
                  <input
                    type="text"
                    id="agent-first-name"
                    name="first-name"
                    class="form__input agentDisabled"
                    value=<%= locals.agentProfile.firstName || "N/A" %> 
                    disabled
                     required
                  />
                </div>
                <div class="form__group">
                  <label for="agent-last-name" class="form__label">Last Name</label>
                  <input
                    type="text"
                    id="agent-last-name"
                    class="form__input agentDisabled"
                    value=<%= locals.agentProfile.lastName || "N/A" %>
                    disabled
                     required
                  />
                </div>
              </div>
              <div class="form__row">
                <div class="form__group">
                  <label for="phone" class="form__label">Phone</label>
                  <input
                    type="tel"
                    id="phone"
                    class="form__input agentDisabled"
                    value=<%= locals.agentProfile.phone || "N/A" %>
                    disabled
                     required
                  />
                </div>
                <div class="form__group">
                  <label for="zip-code" class="form__label">Zip Code</label>
                  <input
                    type="number"
                    id="zip-code"
                    class="form__input agentDisabled"
                    value=<%= locals.agentProfile.zipcode || "N/A" %>
                    disabled
                     required
                  />
                </div>
              </div>
              <div class="form__row">
                <div class="form__group">
                  <label for="city" class="form__label">City</label>
                  <input
                    type="text"
                    id="city"
                    class="form__input agentDisabled"
                    value=<%= locals.agentProfile.city || "N/A" %>
                    disabled
                     required
                  />
                </div>
                <div class="form__group">
                  <label for="contactMessage" class="form__label">Allow Messages</label>
                  <select id="contactMessage" class="form__select agentDisabled" disabled required>
                    <option value="false" <% if(locals.agentProfile.allowContactMessage === false) { %>
                      selected
                    <%} %> >No</option>
                    <option value="true" <% if(locals.agentProfile.allowContactMessage === true) { %>
                      selected
                    <%} %> >Yes</option>
                  </select>
                </div>
              </div>

              <div class="form__row">
                <div class="form__group">
                  <button
                    type="submit"
                    id="agent-submit-btn"
                    class="asetup-btn form__button-btn asetup-form-main-btn agentDisabled"
                    disabled
                  >
                    Update Account
                  </button>
                </div>
              </div>
            </form>
          </section>
          <%}%> 

          <section class="asetup-form">
            <div class="form__row">
              <div class="form__details--head">
                Change your account password
              </div>
            </div>
            <form id="password-form" class="form__row">
                
                <div class="form__group">
                  <label for="old-password" class="form__label">Old Password</label>
                  <input type="text" id="old-password" class="form__input" required/>
                </div>
                <div class="form__group">
                  <label for="new-password" class="form__label">New Password</label>
                  <input type="text" id="new-password" class="form__input" required/>
                </div>
                <div class="form__row">
                  <div class="form__group">
                    <button id="password-submit-btn" class="asetup-btn form__button-btn asetup-form-main-btn">Change</button>
                  </div>
                </div>
              </form>
          </section>

          <% if(locals.agentProfile && locals.agentProfile.preference){ %> 

          <section class="asetup-form asetup-form-contact">
            <div class="contact-preferences">
              <div class="form__details">
                <div class="form__details--head">Contact Preferences</div>
                <div class="form__details--text">Give us details pertaining to your contact preferences.
                   Let us  know the most suitable way you want to receive updates about your account and 
                   notifications.  Add a phone number if you would like to receive text messages.
                </div>
              </div>
              <div class="help-button">
                <button class="asetup-btn help-button__btn">
                  <img
                    src="/assets/images/information.svg"
                    alt="help"
                    class="asetup-btn-img"
                  />
                  Help
                </button>
              </div>
              <form id="preference-form">
                <div class="form__row">
                  <div class="form__group">
                    <div class="form__input--head">Contact Me:</div>
                    <div class="checkbox-div">
                      <input
                        type="checkbox"
                        id="for-review"
                        class="form__checkbox"
                        checked= <%=locals.agentProfile.preference.newReview%>
                      />
                      <label
                        for="for-review"
                        class="form__label form__checkbox-label"
                      >
                        After a customer leaves a review
                      </label>
                    </div>
                    <div class="checkbox-div">
                      <input
                        type="checkbox"
                        id="for-message"
                        class="form__checkbox"
                        checked=<%= locals.agentProfile.preference.messageReceived %>
                      />
                      <label
                        for="for-message"
                        class="form__label form__checkbox-label"
                      >
                        When I receive a message
                      </label>
                    </div>
                    <div class="checkbox-div">
                      <input
                        type="checkbox"
                        id="for-published"
                        class="form__checkbox"
                        checked=<%= locals.agentProfile.preference.articlePublished %>
                      />
                      <label for="for-published" class="form__label form__checkbox-label">
                        When my article is published
                      </label>
                    </div>
                  </div>
                </div>

                <div class="form__row">
                  <div class="form__group">
                    <div class="form__input--head">
                      I prefer to be contacted by:
                      <span>
                        <button class="asetup-btn asetup-btn-icon">
                          <img
                            src="/assets/images/question.svg"
                            alt="help"
                            class=""
                          />
                        </button>
                      </span>
                    </div>
                    <div class="">
                      <select id="form-select" class="form__select">
                        <option value="email" selected>Email</option>
                        <option value="phone">Phone</option>
                        <option value="text">Text</option>
                      </select>
                      <label
                        for="form-select"
                        class="form__label form__checkbox-label"
                      >
                        After a customer leaves a review
                      </label>
                    </div>
                  </div>
                </div>
                <div class="form__row">
                  <div class="form__group">
                    <button
                      type="submit"
                      id="preferenceBtn"
                      class="asetup-btn form__button-btn asetup-form-main-btn"
                    >
                      Save Contact Preferences
                    </button>
                  </div>
                </div>
              </form>
            </div>
          </section>
          <% } %>
        </div>
      </div>
    </div>
    <script
      src="https://code.jquery.com/jquery-3.4.1.slim.min.js"
      integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"
      integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js"
      integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6"
      crossorigin="anonymous"
    ></script>
    <script src="https://cdn.jsdelivr.net/npm/notyf@3/notyf.min.js"></script>
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.20.0/axios.js"
      integrity="sha512-nqIFZC8560+CqHgXKez61MI0f9XSTKLkm0zFVm/99Wt0jSTZ7yeeYwbzyl0SGn/s8Mulbdw+ScCG41hmO2+FKw=="
      crossorigin="anonymous"
    ></script>
    <script src="/javascripts/accountUpdate.js"></script>
    <script src="/javascripts/agentUpdate.js"></script>
    <script src="/javascripts/changePassword.js"></script>
<script src="/javascripts/contactPreference.js"></script>
  </body>
</html>
